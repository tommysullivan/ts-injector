#!/usr/bin/env node
var API = require('../lib/api');
var configJSON = require('../configuration/config.json');
var api = API(configJSON);

function logError(error) {
    console.log("ERROR: "+error);
}

api.newCLIInterviewer().performInterview().done(
    function(interviewAnswers) {
        api.newJiraRestClient().authenticate(interviewAnswers.username, interviewAnswers.password).done(
            function(jiraRestSession) {
                api.newCucumberRunner(jiraRestSession).runCukesForJIRARelease(interviewAnswers.release).done(
                    null,
                    logError
                );
            },
            logError
        );
    },
    logError
);