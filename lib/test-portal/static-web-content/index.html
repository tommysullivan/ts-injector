<!doctype html>
<html ng-app="testPortalApp">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script src="js/test-portal-app.js"></script>
    <link rel="stylesheet" href="style.css" />
    <title>Cucumber Report</title>
</head>
<body ng-controller="featuresController">
<h1>Cucumber Test Result Viewer / Editor</h1>
<div class="navigation">
    <label>Tags: <input ng-model="soughtTags"></label>
    <label><input type="checkbox">Failures Only</label>
    <button>ASD</button>
</div>
<div class="report {{report.status}}">
    <h2>Test {{report.status}}.</h2>
    <p class="summary">
        {{report.featuresSummary.total}} features
        (
        {{report.featuresSummary.failed}} failed,
        {{report.featuresSummary.passed}} passed,
        {{report.featuresSummary.pending}} pending,
        {{report.featuresSummary.skipped}} skipped
        )
    </p>
    <p class="summary">
        {{report.scenariosSummary.total}} scenarios
        (
        {{report.scenariosSummary.failed}} failed,
        {{report.scenariosSummary.passed}} passed,
        {{report.scenariosSummary.pending}} pending,
        {{report.scenariosSummary.skipped}} skipped
        )
    </p>
    <p class="summary">
        {{report.stepsSummary.total}} steps
        (
        {{report.stepsSummary.failed}} failed,
        {{report.stepsSummary.passed}} passed,
        {{report.stepsSummary.pending}} pending,
        {{report.stepsSummary.skipped}} skipped
        )
    </p>
    <h3 style="margin-top: 10px;">Table of Contents</h3>
    <ul>
        <li class="{{feature.status}}" ng-repeat="feature in report.features | filter:soughtTags">
            <a href="#{{feature.id}}">Feature: <strong>{{feature.name}}</strong></a>
        </li>
    </ul>
    <div class="feature {{feature.status}}" ng-repeat="feature in report.features | filter:soughtTags">
        <a name="{{feature.id}}" />
        <h2>Feature: {{feature.name}}</h2>
        <p class="backToTop"> [<a href="#top">back to top</a>]</p>
        <p class="summary">
            {{feature.scenariosSummary.total}} scenarios
            (
            {{feature.scenariosSummary.failed}} failed,
            {{feature.scenariosSummary.pending}} passed,
            {{feature.scenariosSummary.passed}} pending,
            {{feature.scenariosSummary.skipped}} skipped
            )
        </p>
        <p class="summary">
            {{feature.stepsSummary.total}} steps
            (
            {{feature.stepsSummary.failed}} failed,
            {{feature.stepsSummary.pending}} passed,
            {{feature.stepsSummary.passed}}  pending,
            {{feature.stepsSummary.skipped}}  skipped
            )
        </p>
        <div class="scenario {{scenario.status}}" ng-repeat="scenario in feature.elements | filter:soughtTags">
                <small><span class="tag" ng-repeat="tag in scenario.tags">{{tag.name}} </span></small>
                <h3>{{scenario.keyword}}: {{scenario.name}}</h3>
                <p class="backToTop"> [<a href="#{{feature.id}}">back to top of feature &quot;{{feature.name}}&quot;</a>]  [<a href="#top">back to top</a>]</p>
                <p class="summary">
                    {{scenario.summary.total}} steps
                    (
                    {{scenario.summary.failed}} failed,
                    {{scenario.summary.passed}} passed,
                    {{scenario.summary.pending}} pending,
                    {{scenario.summary.skipped}} skipped
                    )
                </p>
                <div class="step {{step.result.status}}" ng-repeat="step in scenario.steps | filter:{keyword:'!Before'}">
                    <p>
                        <span ng-show="step.result.status == 'pending'">[pending]</span>
                        <span ng-show="step.result.status == 'skipped'">[not executed]</span>
                        {{step.keyword}}{{step.name}}
                    </p>
                    <table class="stepTable" ng-show="step.rows.length > 0">
                        <tr ng-repeat="row in step.rows">
                            <td class="stepTableCell" ng-repeat="cellValue in row.cells">{{cellValue}}</td>
                        </tr>
                    </table>
                    <div class="errorMessage" ng-show="step.result.error_message != undefined"><p>{{step.result.error_message}}</p></div>
                </div>
            </div>
    </div>
</div>
</body>
</html>