{"contentType":"vnd/mapr.test-portal.test-result+json","version":"0.1.0","features":[{"name":"ElasticSearch Logs","id":"ElasticSearch-Logs","scenarios":[{"name":"Warden Logs present in ES Query","tags":[{"name":"@SPYG-125","line":3},{"name":"@HealthCheck","line":3}],"tagNames":["@SPYG-125","@HealthCheck"],"keyword":"Scenario","steps":[{"name":"I have an ES server running at \"http://10.10.1.103:9200\"","keyword":"Given ","status":"passed"},{"name":"I query for logs for index \"logstash-*\"","keyword":"When ","status":"passed"},{"name":"I see at least a single log containing the word \"warden\"","keyword":"Then ","status":"passed"}]}]},{"name":"Grafana Metrics","id":"Grafana-Metrics","scenarios":[{"name":"View First Metrics in Node Dashboard","tags":[{"name":"@SPYG-124","line":3},{"name":"@Manual","line":3},{"name":"@WIP","line":3}],"tagNames":["@SPYG-124","@Manual","@WIP"],"keyword":"Scenario","steps":[{"name":"I have a grafana server and port set to \"http://10.10.1.103:3000\"","keyword":"Given ","status":"passed"},{"name":"it has been populated with reports as described in \"installation.feature/Grafana Dashboard Definition Import\"","keyword":"And ","status":"passed"},{"name":"my grafana username is \"admin\"","keyword":"And ","status":"passed"},{"name":"my grafana password is \"admin\"","keyword":"And ","status":"passed"},{"name":"I have logged into Grafana","keyword":"And ","status":"passed"},{"name":"I navigate to the node dashboard","keyword":"When ","status":"notExecuted"},{"name":"I look for the following metrics","keyword":"When ","status":"notExecuted","rows":[{"cells":["metric name"]},{"cells":["sum:rate:mapr.io.write_bytes"]},{"cells":["sum:rate:mapr.io.read_bytes"]}]},{"name":"I see the corresponding graph with reasonably accurate data for the past 24 hours","keyword":"Then ","status":"notExecuted"}]}]},{"name":"Installation","id":"Installation","scenarios":[{"name":"Manual Installation","tags":[{"name":"@SPYG-123","line":9},{"name":"@Manual","line":9}],"tagNames":["@SPYG-123","@Manual"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"notExecuted"},{"name":"I have manually prepared a single node cluster as described by \"single-node-cluster-prep.feature\"","keyword":"Given ","status":"pending"},{"name":"the node is running CentOS 7","keyword":"And ","status":"notExecuted"},{"name":"I read the readme at \"https://github.com/mapr/private-spyglass\"","keyword":"When ","status":"notExecuted"},{"name":"it tells me how to install, configure and run the services required for Spyglass","keyword":"Then ","status":"notExecuted"},{"name":"it tells me how to discover the URLs for MCS, Kibana, Grafana, OpenTSDB and ElasticSearch","keyword":"And ","status":"notExecuted"}]},{"name":"Manual Installation","tags":[{"name":"@SPYG-123","line":9},{"name":"@Manual","line":9}],"tagNames":["@SPYG-123","@Manual"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"notExecuted"},{"name":"I have manually prepared a single node cluster as described by \"single-node-cluster-prep.feature\"","keyword":"Given ","status":"notExecuted"},{"name":"the node is running Ubuntu 12.04","keyword":"And ","status":"notExecuted"},{"name":"I read the readme at \"https://github.com/mapr/private-spyglass\"","keyword":"When ","status":"notExecuted"},{"name":"it tells me how to install, configure and run the services required for Spyglass","keyword":"Then ","status":"notExecuted"},{"name":"it tells me how to discover the URLs for MCS, Kibana, Grafana, OpenTSDB and ElasticSearch","keyword":"And ","status":"notExecuted"}]},{"name":"Manual Installation","tags":[{"name":"@SPYG-123","line":9},{"name":"@Manual","line":9}],"tagNames":["@SPYG-123","@Manual"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"notExecuted"},{"name":"I have manually prepared a single node cluster as described by \"single-node-cluster-prep.feature\"","keyword":"Given ","status":"notExecuted"},{"name":"the node is running SUSE 12","keyword":"And ","status":"notExecuted"},{"name":"I read the readme at \"https://github.com/mapr/private-spyglass\"","keyword":"When ","status":"notExecuted"},{"name":"it tells me how to install, configure and run the services required for Spyglass","keyword":"Then ","status":"notExecuted"},{"name":"it tells me how to discover the URLs for MCS, Kibana, Grafana, OpenTSDB and ElasticSearch","keyword":"And ","status":"notExecuted"}]},{"name":"Automated Installation for QA Purposes","tags":[{"name":"@SPYG-123","line":22},{"name":"@SPYG-142","line":22}],"tagNames":["@SPYG-123","@SPYG-142"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"passed"},{"name":"I have automatically prepared a single node cluster as described by \"single-node-cluster-prep.feature\"","keyword":"Given ","status":"pending"},{"name":"the node is running CentOS 7","keyword":"Given ","status":"notExecuted"},{"name":"I prepare it using automation described by \"single-node-cluster-prep.feature\"","keyword":"And ","status":"notExecuted"},{"name":"I run the Spyglass installer","keyword":"When ","status":"notExecuted"},{"name":"I subsequently run the health check described by \"health-check.feature\"","keyword":"And ","status":"notExecuted"},{"name":"the health check passes","keyword":"Then ","status":"notExecuted"}]},{"name":"Automated Installation for QA Purposes","tags":[{"name":"@SPYG-123","line":22},{"name":"@SPYG-142","line":22}],"tagNames":["@SPYG-123","@SPYG-142"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"passed"},{"name":"I have automatically prepared a single node cluster as described by \"single-node-cluster-prep.feature\"","keyword":"Given ","status":"pending"},{"name":"the node is running Ubuntu 12.04","keyword":"Given ","status":"notExecuted"},{"name":"I prepare it using automation described by \"single-node-cluster-prep.feature\"","keyword":"And ","status":"notExecuted"},{"name":"I run the Spyglass installer","keyword":"When ","status":"notExecuted"},{"name":"I subsequently run the health check described by \"health-check.feature\"","keyword":"And ","status":"notExecuted"},{"name":"the health check passes","keyword":"Then ","status":"notExecuted"}]},{"name":"Automated Installation for QA Purposes","tags":[{"name":"@SPYG-123","line":22},{"name":"@SPYG-142","line":22}],"tagNames":["@SPYG-123","@SPYG-142"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"passed"},{"name":"I have automatically prepared a single node cluster as described by \"single-node-cluster-prep.feature\"","keyword":"Given ","status":"pending"},{"name":"the node is running SUSE 12","keyword":"Given ","status":"notExecuted"},{"name":"I prepare it using automation described by \"single-node-cluster-prep.feature\"","keyword":"And ","status":"notExecuted"},{"name":"I run the Spyglass installer","keyword":"When ","status":"notExecuted"},{"name":"I subsequently run the health check described by \"health-check.feature\"","keyword":"And ","status":"notExecuted"},{"name":"the health check passes","keyword":"Then ","status":"notExecuted"}]},{"name":"Grafana Dashboard Definition Import","tags":[{"name":"@SPYG-124","line":36}],"tagNames":["@SPYG-124"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"passed"},{"name":"I have a grafana server and port set to \"http://10.10.1.103:3000\"","keyword":"Given ","status":"passed"},{"name":"my grafana username is \"admin\"","keyword":"And ","status":"passed"},{"name":"my grafana password is \"admin\"","keyword":"And ","status":"passed"},{"name":"the fqdns of my cluster are","keyword":"And ","status":"passed","rows":[{"cells":["fqdns"]},{"cells":["10.10.1.102"]}]},{"name":"I have an authenticated grafana rest client","keyword":"And ","status":"passed"},{"name":"I request to import the following dashboard definitions:","keyword":"When ","status":"failed","rows":[{"cells":["dashboard name"]},{"cells":["cldb"]},{"cells":["dbmetrics"]},{"cells":["node"]},{"cells":["volume"]},{"cells":["yarn"]}]},{"name":"the reports are all available to view","keyword":"Then ","status":"notExecuted"}]},{"name":"Install on Suse 12","tags":[{"name":"@Manual","line":55}],"tagNames":["@Manual"],"keyword":"Scenario","steps":[{"name":"the cluster under test is a single node cluster","keyword":"Given ","status":"notExecuted"}]}]},{"name":"Kibana Logs","id":"Kibana-Logs","scenarios":[{"name":"View Warden Log in Discovery Tab","tags":[{"name":"@SPYG-125","line":3},{"name":"@Manual","line":3}],"tagNames":["@SPYG-125","@Manual"],"keyword":"Scenario","steps":[{"name":"I have a kibana instance running at \"http://10.10.1.103:5601\"","keyword":"Given ","status":"notExecuted"},{"name":"I navigate to kibana's discovery interface","keyword":"When ","status":"notExecuted"},{"name":"I see at least one log from warden","keyword":"Then ","status":"notExecuted"}]}]},{"name":"MCS","id":"MCS","scenarios":[{"name":"Spyglass Services appear Healthy in MCS after Installation","tags":[{"name":"@HealthCheck","line":9},{"name":"@SPYG-123","line":9},{"name":"@SPYG-143","line":9}],"tagNames":["@HealthCheck","@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I am testing against a configured cluster that is expected to be functioning","keyword":"Given ","status":"passed"},{"name":"I use the MCS Rest Client Session to retrieve dashboardInfo","keyword":"When ","status":"passed"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"passed"},{"name":"I do not see any unhealthy spyglass services","keyword":"Then ","status":"passed"}]},{"name":"Spyglass Health Check Negative Testing","tags":[{"name":"@SPYG-123","line":16},{"name":"@SPYG-143","line":16}],"tagNames":["@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I want to make sure the health check is accurate","keyword":"Given ","status":"passed"},{"name":"I purposely take down collectd on one or more nodes","keyword":"When ","status":"pending"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"notExecuted"},{"name":"I see that collectd is in the list within \"16\" seconds","keyword":"Then ","status":"notExecuted"}]},{"name":"Spyglass Health Check Negative Testing","tags":[{"name":"@SPYG-123","line":16},{"name":"@SPYG-143","line":16}],"tagNames":["@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I want to make sure the health check is accurate","keyword":"Given ","status":"passed"},{"name":"I purposely take down fluentd on one or more nodes","keyword":"When ","status":"pending"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"notExecuted"},{"name":"I see that fluentd is in the list within \"16\" seconds","keyword":"Then ","status":"notExecuted"}]},{"name":"Spyglass Health Check Negative Testing","tags":[{"name":"@SPYG-123","line":16},{"name":"@SPYG-143","line":16}],"tagNames":["@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I want to make sure the health check is accurate","keyword":"Given ","status":"passed"},{"name":"I purposely take down elasticsearch on one or more nodes","keyword":"When ","status":"pending"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"notExecuted"},{"name":"I see that elasticsearch is in the list within \"16\" seconds","keyword":"Then ","status":"notExecuted"}]},{"name":"Spyglass Health Check Negative Testing","tags":[{"name":"@SPYG-123","line":16},{"name":"@SPYG-143","line":16}],"tagNames":["@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I want to make sure the health check is accurate","keyword":"Given ","status":"passed"},{"name":"I purposely take down opentsdb on one or more nodes","keyword":"When ","status":"pending"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"notExecuted"},{"name":"I see that opentsdb is in the list within \"16\" seconds","keyword":"Then ","status":"notExecuted"}]},{"name":"Spyglass Health Check Negative Testing","tags":[{"name":"@SPYG-123","line":16},{"name":"@SPYG-143","line":16}],"tagNames":["@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I want to make sure the health check is accurate","keyword":"Given ","status":"passed"},{"name":"I purposely take down kibana on one or more nodes","keyword":"When ","status":"pending"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"notExecuted"},{"name":"I see that kibana is in the list within \"16\" seconds","keyword":"Then ","status":"notExecuted"}]},{"name":"Spyglass Health Check Negative Testing","tags":[{"name":"@SPYG-123","line":16},{"name":"@SPYG-143","line":16}],"tagNames":["@SPYG-123","@SPYG-143"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I want to make sure the health check is accurate","keyword":"Given ","status":"passed"},{"name":"I purposely take down grafana on one or more nodes","keyword":"When ","status":"pending"},{"name":"I ask the dashboardInfo for unhealthySpyglassServices","keyword":"And ","status":"notExecuted"},{"name":"I see that grafana is in the list within \"16\" seconds","keyword":"Then ","status":"notExecuted"}]},{"name":"MCS 3rd Party UI Links","tags":[{"name":"@HealthCheck","line":31},{"name":"@SPYG-126","line":31}],"tagNames":["@HealthCheck","@SPYG-126"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I ask for a link to grafana","keyword":"When ","status":"passed"},{"name":"I receive a URL to grafana","keyword":"Then ","status":"passed"},{"name":"a GET request of the URL does not return an error status code","keyword":"And ","status":"failed"}]},{"name":"MCS 3rd Party UI Links","tags":[{"name":"@HealthCheck","line":31},{"name":"@SPYG-126","line":31}],"tagNames":["@HealthCheck","@SPYG-126"],"keyword":"Scenario","steps":[{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"my MCS username is \"mapr\"","keyword":"Given ","status":"passed"},{"name":"my MCS password is \"mapr\"","keyword":"And ","status":"passed"},{"name":"my MCS is running at \"https://10.10.1.103:8443\"","keyword":"And ","status":"passed"},{"name":"I have an authenticated MCS Rest Client Session","keyword":"And ","status":"passed"},{"name":"I ask for a link to kibana","keyword":"When ","status":"passed"},{"name":"I receive a URL to kibana","keyword":"Then ","status":"passed"},{"name":"a GET request of the URL does not return an error status code","keyword":"And ","status":"failed"}]}]},{"name":"OpenTSDB Metrics REST API","id":"OpenTSDB-Metrics-REST-API","scenarios":[{"name":"Getting Simple Node Metrics via REST API","tags":[{"name":"@SPYG-124","line":3},{"name":"@HealthCheck","line":3}],"tagNames":["@SPYG-124","@HealthCheck"],"keyword":"Scenario","steps":[{"name":"the URL and port of OpenTSDB is \"http://10.10.1.103:4242\"","keyword":"Given ","status":"passed"},{"name":"I specify the query range start as \"1h-ago\"","keyword":"When ","status":"passed"},{"name":"I query for the following metrics:","keyword":"And ","status":"passed","rows":[{"cells":["metric name"]},{"cells":["sum:rate:mapr.io.write_bytes"]},{"cells":["sum:rate:mapr.io.read_bytes"]},{"cells":["sum:rate:interface.if_octets.rx"]}]},{"name":"I receive at least \"200\" values per metric covering that time period","keyword":"Then ","status":"passed"},{"name":"those values may be incorrect but we are only testing for presence","keyword":"And ","status":"passed"}]}]},{"name":"Single Node Cluster Preparation","id":"Single-Node-Cluster-Preparation","scenarios":[]}]}